// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}
// Define the User model
model User {
  id        Int       @id @default(autoincrement())
  email     String    @unique
  password  String
  firstName String
  lastName  String
  // Define a relation to the Organization model
  organization Organization @relation(fields: [organizationId], references: [id])
  organizationId Int
  // Define a relation to the Role model to represent the user's privileges
  role Role @relation(fields: [roleId], references: [id])
  roleId Int
  // Define a relation for the user's higher escalated user (manager)
  manager User? @relation("ManagerToUser", fields: [managerId], references: [id])
  managerId Int?
}

// Define the Organization model
model Organization {
  id       Int     @id @default(autoincrement())
  name     String
  // Define a relation to the User model to represent users in the organization
  users    User[]
}

// Define the Role model
model Role {
  id      Int      @id @default(autoincrement())
  name    String
  // Define a relation to the User model to associate users with roles
  users   User[]
  // Define a relation to the DashboardComponent model to specify access permissions
  dashboardComponents DashboardComponent[]
}

// Define the DashboardComponent model
model DashboardComponent {
  id      Int      @id @default(autoincrement())
  name    String
  // Define a relation to the Role model to specify which roles have access to this component
  roles   Role[]
}
